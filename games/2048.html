<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>2048 Game</title>
<style>
    body {
        background: #faf8ef;
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    #game-container {
        text-align: center;
    }
    #board {
        width: 400px;
        height: 400px;
        background: #bbada0;
        border-radius: 6px;
        padding: 10px;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-gap: 10px;
        margin-top: 20px;
    }
    .tile {
        width: 90px;
        height: 90px;
        background: #cdc1b4;
        border-radius: 6px;
        font-size: 30px;
        font-weight: bold;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #776e65;
        transition: all 0.1s ease;
    }

    /* Colors for tiles */
    .t2 { background: #eee4da; }
    .t4 { background: #ede0c8; }
    .t8 { background: #f2b179; color: #f9f6f2; }
    .t16 { background: #f59563; color: #f9f6f2; }
    .t32 { background: #f67c5f; color: #f9f6f2; }
    .t64 { background: #f65e3b; color: #f9f6f2; }
    .t128 { background: #edcf72; color: #f9f6f2; }
    .t256 { background: #edcc61; color: #f9f6f2; }
    .t512 { background: #edc850; color: #f9f6f2; }
    .t1024 { background: #edc53f; color: #f9f6f2; }
    .t2048 { background: #edc22e; color: #f9f6f2; }

    #score {
        font-size: 24px;
        margin-top: 10px;
    }
</style>
</head>
<body>

<div id="game-container">
    <h1>2048</h1>
    <div id="score">Score: 0</div>
    <div id="board"></div>
</div>

<script>
let board = [
    [0,0,0,0],
    [0,0,0,0],
    [0,0,0,0],
    [0,0,0,0]
];

let score = 0;

const boardDiv = document.getElementById("board");
const scoreDiv = document.getElementById("score");

function setupBoard() {
    boardDiv.innerHTML = "";
    for (let r = 0; r < 4; r++) {
        for (let c = 0; c < 4; c++) {
            let value = board[r][c];
            let tile = document.createElement("div");
            tile.classList.add("tile");
            if (value != 0) {
                tile.textContent = value;
                tile.classList.add(`t${value}`);
            }
            boardDiv.appendChild(tile);
        }
    }
}

function addRandomTile() {
    let empty = [];
    for (let r = 0; r < 4; r++) {
        for (let c = 0; c < 4; c++) {
            if (board[r][c] === 0) empty.push({r,c});
        }
    }
    if (empty.length === 0) return;

    let {r, c} = empty[Math.floor(Math.random() * empty.length)];
    board[r][c] = Math.random() < 0.9 ? 2 : 4;
}

function slide(row) {
    row = row.filter(v => v !== 0);
    for (let i = 0; i < row.length - 1; i++) {
        if (row[i] === row[i + 1]) {
            row[i] *= 2;
            score += row[i];
            row[i + 1] = 0;
        }
    }
    row = row.filter(v => v !== 0);
    while (row.length < 4) row.push(0);
    return row;
}

function rotateBoard() {
    let newBoard = [[],[],[],[]];
    for (let r = 0; r < 4; r++) {
        for (let c = 0; c < 4; c++) {
            newBoard[r][c] = board[c][r];
        }
    }
    board = newBoard;
}

function flipBoard() {
    for (let r = 0; r < 4; r++) {
        board[r].reverse();
    }
}

function moveLeft() {
    let old = JSON.stringify(board);
    for (let r = 0; r < 4; r++) {
        board[r] = slide(board[r]);
    }
    if (old !== JSON.stringify(board)) addRandomTile();
}

function moveRight() {
    flipBoard();
    moveLeft();
    flipBoard();
}

function moveUp() {
    rotateBoard();
    moveLeft();
    rotateBoard();
    rotateBoard();
    rotateBoard();
}

function moveDown() {
    rotateBoard();
    moveRight();
    rotateBoard();
    rotateBoard();
    rotateBoard();
}

document.addEventListener("keydown", e => {
    if (e.key === "ArrowLeft") moveLeft();
    if (e.key === "ArrowRight") moveRight();
    if (e.key === "ArrowUp") moveUp();
    if (e.key === "ArrowDown") moveDown();

    scoreDiv.textContent = "Score: " + score;
    setupBoard();
});

addRandomTile();
addRandomTile();
setupBoard();
</script>

</body>
</html>
